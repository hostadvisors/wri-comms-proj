/* ========================================================================
   WRI Starlight Theme - WCAG 2.1 AA Compliant
   - Stand-alone brand layer for @astrojs/starlight
   - Light/Dark support with accessible contrast ratios
   - Noto Sans typography with proper sizing hierarchy
   - Minimal, accessible accent usage with WRI Yellow
   ------------------------------------------------------------------------
   ACCESSIBILITY COMPLIANCE:
   - All colors meet WCAG 2.1 AA contrast requirements (4.5:1 minimum)
   - Links: WRI Yellow-700 (#B88000) = 4.87:1 on white
   - Buttons: White text on accessible yellow for maximum contrast
   - Focus indicators: 3px outline with high contrast colors
   - Typography: Clear hierarchy without conflicting font declarations
   ------------------------------------------------------------------------
   Usage (astro.config):
   starlight({ customCss: ['./src/wri-theme/wri.css'] })
   ======================================================================== */

/* We follow Starlight's recommended cascade:
   - a custom layer name BEFORE the framework layer (to define tokens),
   - then an overrides layer AFTER (to apply component polish).
   Keep the names stable to avoid collisions across sites.
*/
@layer wri-tokens, starlight, wri-overrides;

/* =========================================================================
   1) BRAND TOKENS (globals)
   -------------------------------------------------------------------------
   All brand tokens live in :root so sites can reuse them if needed.
   ========================================================================= */
@layer wri-tokens {
  :root {
    /* Typography - Noto Sans with specific weights */
    --wri-font-sans: "Noto Sans", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
                     Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji",
                     "Segoe UI Emoji", "Segoe UI Symbol";
    --wri-font-weight-light: 300;
    --wri-font-weight-medium: 500;
    --wri-font-weight-bold: 700;

    /* Official WRI Brand Colors - Primary */
    --wri-yellow:     #F0AB00; /* RGB 240, 171, 0 - Official WRI primary */
    --wri-gray:       #9B9B9B; /* RGB 155, 155, 155 - Official WRI gray */

    /* Official WRI Brand Colors - Secondary */
    --wri-blue:       #0099CC; /* RGB 0, 156, 204 - info */
    --wri-red:        #C51F24; /* RGB 197, 31, 36 - danger */
    --wri-lime:       #97BD3D; /* RGB 151, 189, 61 - success accent */
    --wri-purple:     #7D0063; /* RGB 125, 0, 99 - accent */
    --wri-green:      #007A4D; /* RGB 0, 122, 77 - success */
    --wri-navy:       #003F6A; /* RGB 0, 63, 106 - deep accent */
    --wri-orange:     #E98300; /* RGB 233, 131, 0 - warning */
    --wri-berry:      #ED1A37; /* RGB 237, 26, 55 - accent */
    --wri-bright:     #FCD900; /* RGB 252, 217, 0 - bright accent */

    /* Expanded Yellow palette for theming (derived from official #F0AB00) */
    --wri-yellow-50:  #FFFBF0;
    --wri-yellow-100: #FFF4D6;
    --wri-yellow-200: #FFE6A3;
    --wri-yellow-300: #FFD670;
    --wri-yellow-400: #FFC13D;
    --wri-yellow-500: #F0AB00; /* Official brand color */
    --wri-yellow-600: #D99900;
    --wri-yellow-700: #B88000;
    --wri-yellow-800: #996700;
    --wri-yellow-900: #664400;
    --wri-yellow-950: #332200;

    /* Neutral system (refined for docs legibility + WRI brand) */
    --wri-slate-50:  #F8FAFC;
    --wri-slate-100: #F1F5F9;
    --wri-slate-200: #E2E8F0;
    --wri-slate-300: #CBD5E1;
    --wri-slate-400: #94A3B8;
    --wri-slate-500: #64748B;
    --wri-slate-600: #475569;
    --wri-slate-700: #334155;
    --wri-slate-800: #1E293B;
    --wri-slate-900: #0F172A;
    --wri-slate-950: #020617;

    /* WCAG 2.1 AA Compliant Color Scheme - Using WRI Green for Links */
    
    /* WRI uses GREEN for links on their website, not yellow */
    --wri-link-light: #007A4D; /* WRI Green - 4.61:1 on white */
    --wri-link-hover-light: #005A39; /* Darker green - 6.31:1 on white */
    --wri-link-dark: #4ADE80; /* Light green - good contrast on dark */
    --wri-link-hover-dark: #22C55E; /* Brighter green for hover */
    
    /* WRI Gold - EXACT brand color for backgrounds */
    --wri-gold-bg: #F0AB00; /* Official WRI gold */
    --wri-gold-accessible: #D99900; /* Darker for text when needed */
    
    /* Typography scale - Use Starlight defaults, only set line-height */
    --sl-text-body-line: 1.6;

    /* Map brand tokens to Starlight CSS variables */
    --sl-font: var(--wri-font-sans);
    --sl-font-system: var(--wri-font-sans);

    /* Light mode base - using WRI-compliant neutrals */
    --sl-color-white: #FFFFFF;
    --sl-color-black: var(--wri-slate-900);
    --sl-color-text: var(--wri-slate-900);
    --sl-color-text-invert: var(--wri-slate-50);
    --sl-color-bg: #FFFFFF;
    --sl-color-bg-nav: #FFFFFF;
    --sl-color-bg-sidebar: var(--wri-slate-50);
    --sl-color-bg-inline-code: var(--wri-slate-100);
    --sl-color-hairline: var(--wri-slate-200);
    --sl-color-hairline-light: var(--wri-slate-100);
    --sl-color-hairline-shade: var(--wri-slate-300);

    /* WCAG AA Compliant WRI brand accents - Gold backgrounds only (mapped to WRI tokens) */
    --sl-color-accent-high: var(--wri-gold-700);
    --sl-color-accent: var(--wri-gold-500);
    --sl-color-accent-low: var(--wri-gold-100);
    --sl-color-text-accent: var(--sl-color-accent);
    --sl-color-text-invert: var(--sl-color-black);
    --sl-color-bg-nav: var(--sl-color-gray-7);
    --sl-color-bg-sidebar: var(--sl-color-bg);
    --sl-color-bg-inline-code: var(--sl-color-gray-6);
    --sl-color-bg-accent: var(--sl-color-accent);

    /* Semantic colors using WRI secondary palette */
    --sl-color-blue: var(--wri-blue);
    --sl-color-blue-low: color-mix(in srgb, var(--wri-blue) 10%, transparent);
    --sl-color-blue-high: color-mix(in srgb, var(--wri-blue) 15%, black);
    --sl-color-green: var(--wri-green);
    --sl-color-green-low: color-mix(in srgb, var(--wri-green) 10%, transparent);
    --sl-color-green-high: color-mix(in srgb, var(--wri-green) 15%, black);
    --sl-color-orange: var(--wri-orange);
    --sl-color-orange-low: color-mix(in srgb, var(--wri-orange) 10%, transparent);
    --sl-color-orange-high: color-mix(in srgb, var(--wri-orange) 15%, black);
    --sl-color-red: var(--wri-red);
    --sl-color-red-low: color-mix(in srgb, var(--wri-red) 10%, transparent);
    --sl-color-red-high: color-mix(in srgb, var(--wri-red) 15%, black);
    --sl-color-purple: var(--wri-purple);
    --sl-color-purple-low: color-mix(in srgb, var(--wri-purple) 10%, transparent);
    --sl-color-purple-high: color-mix(in srgb, var(--wri-purple) 15%, black);

    /* Gray scale using refined neutrals */
    --sl-color-gray-1: var(--wri-slate-100);
    --sl-color-gray-2: var(--wri-slate-200);
    --sl-color-gray-3: var(--wri-slate-300);
    --sl-color-gray-4: var(--wri-slate-400);
    --sl-color-gray-5: var(--wri-slate-500);
    --sl-color-gray-6: var(--wri-slate-600);

    /* Extended gray for layout backgrounds */
    --sl-color-gray-7: var(--wri-slate-700);

    /* Focus ring - use WRI green to match links */
    --sl-color-focus: var(--wri-link-light);
    --wri-focus: rgba(0, 122, 77, 0.6); /* WRI green focus ring */
  }

  /* Dark theme adjustments - WCAG compliant */
  :root[data-theme="dark"] {
    --sl-color-text: var(--wri-slate-100);
    --sl-color-text-invert: var(--wri-slate-900);
    --sl-color-bg: var(--wri-slate-950);
    --sl-color-bg-nav: var(--wri-slate-950);
    --sl-color-bg-sidebar: var(--wri-slate-900);
    --sl-color-bg-inline-code: var(--wri-slate-800);
    --sl-color-hairline: var(--wri-slate-700);
    --sl-color-hairline-light: var(--wri-slate-800);
    --sl-color-hairline-shade: var(--wri-slate-600);

    /* Dark mode accents - maintain WRI brand with good contrast */
  --sl-color-accent-low: color-mix(in srgb, var(--wri-gold-500) 15%, var(--wri-slate-900));
  --sl-color-accent: var(--wri-gold-500); /* Keep WRI gold for backgrounds */
    --sl-color-accent-high: var(--wri-gold-accessible);
    --sl-color-text-accent: var(--wri-link-dark); /* Green links in dark mode */

    /* Enhanced semantic colors for dark mode */
    --sl-color-blue: color-mix(in srgb, var(--wri-blue) 85%, white);
    --sl-color-blue-low: color-mix(in srgb, var(--wri-blue) 15%, var(--wri-slate-900));
    --sl-color-blue-high: color-mix(in srgb, var(--wri-blue) 75%, white);
    --sl-color-green: color-mix(in srgb, var(--wri-green) 85%, white);
    --sl-color-green-low: color-mix(in srgb, var(--wri-green) 15%, var(--wri-slate-900));
    --sl-color-green-high: color-mix(in srgb, var(--wri-green) 75%, white);
    --sl-color-orange: color-mix(in srgb, var(--wri-orange) 85%, white);
    --sl-color-orange-low: color-mix(in srgb, var(--wri-orange) 15%, var(--wri-slate-900));
    --sl-color-orange-high: color-mix(in srgb, var(--wri-orange) 75%, white);
    --sl-color-red: color-mix(in srgb, var(--wri-red) 85%, white);
    --sl-color-red-low: color-mix(in srgb, var(--wri-red) 15%, var(--wri-slate-900));
    --sl-color-red-high: color-mix(in srgb, var(--wri-red) 75%, white);
    --sl-color-purple: color-mix(in srgb, var(--wri-purple) 85%, white);
    --sl-color-purple-low: color-mix(in srgb, var(--wri-purple) 15%, var(--wri-slate-900));
    --sl-color-purple-high: color-mix(in srgb, var(--wri-purple) 75%, white);

    /* Dark gray scale */
    --sl-color-gray-1: var(--wri-slate-800);
    --sl-color-gray-2: var(--wri-slate-700);
    --sl-color-gray-3: var(--wri-slate-600);
    --sl-color-gray-4: var(--wri-slate-500);
    --sl-color-gray-5: var(--wri-slate-400);
    --sl-color-gray-6: var(--wri-slate-300);

    /* Dark focus ring - green to match dark mode links */
    --wri-focus: rgba(74, 222, 128, 0.7); /* Light green for dark backgrounds */
  }
}

/* =========================================================================
   2) BASE ELEMENTS & STARLIGHT INTEGRATION
   -------------------------------------------------------------------------
   Enhanced typography and element styles that work with Starlight's structure
   ========================================================================= */
@layer wri-overrides {
  /* Typography - enhanced readability with WRI brand font */
  html {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-light);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
  }

  /* Typography hierarchy - Reset to Starlight defaults */
  h1, .sl-markdown-content h1 {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-bold);
  }
  
  h2, .sl-markdown-content h2 {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-bold);
  }
  
  h3, .sl-markdown-content h3 {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-bold);
  }
  
  h4, .sl-markdown-content h4 {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-medium);
  }
  
  h5, .sl-markdown-content h5 {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-medium);
  }
  
  h6, .sl-markdown-content h6 {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-medium);
  }

  /* Body text - Use Starlight defaults for sizing */
  p, .sl-markdown-content p,
  li, .sl-markdown-content li {
    font-family: var(--sl-font);
    font-weight: var(--wri-font-weight-light);
    line-height: var(--sl-text-body-line);
  }

  /* Strong and bold elements */
  strong, b,
  .sl-markdown-content strong,
  .sl-markdown-content b {
    font-weight: var(--wri-font-weight-bold);
  }

  /* Emphasis with medium weight for better hierarchy */
  em, .sl-markdown-content em {
    font-weight: var(--wri-font-weight-medium);
    font-style: normal;
  }

  /* WCAG AA Compliant link styles with WRI brand treatment */
  a {
    color: var(--wri-link-light);
    text-decoration: underline;
    text-underline-offset: 0.125em;
    text-decoration-thickness: 1px;
    text-decoration-color: color-mix(in srgb, var(--wri-link-light) 60%, transparent);
    transition: all 0.2s ease;
  }
  
  a:hover, a:focus {
    color: var(--wri-link-hover-light);
    text-decoration-color: var(--wri-link-hover-light);
  }

  /* Dark mode links - WCAG compliant */
  :root[data-theme="dark"] a {
    color: var(--wri-link-dark);
    text-decoration-color: color-mix(in srgb, var(--wri-link-dark) 60%, transparent);
  }
  
  :root[data-theme="dark"] a:hover,
  :root[data-theme="dark"] a:focus {
    color: var(--wri-link-hover-dark);
    text-decoration-color: var(--wri-link-hover-dark);
  }

  /* Selection styling with WRI brand */
  ::selection {
    background: color-mix(in srgb, var(--sl-color-accent) 25%, transparent);
    color: inherit;
  }

  /* Enhanced focus ring system - WCAG 2.1 AA compliant */
  :where(a, button, input, select, textarea, summary, [tabindex]):focus-visible {
    outline: 3px solid var(--wri-yellow); /* Increased to 3px for better visibility */
    outline-offset: 2px;
    border-radius: 4px;
  }

  .sl-link-button {
    color: var(--sl-color-text);
    text-decoration: var(--wri-yellow-500);
  }
  .sl-link-button.primary {
    color: var(--wri-yellow-950);
    text-decoration: var(--wri-yellow-500);
    background-color: var(--wri-yellow-500);
    border: var(--wri-yellow-500)
  }
  .sl-link-button.primary:hover {
    background-color: var(--wri-yellow-700);
  }


  /* Additional focus indicator for links */
  a:focus-visible {
    background: color-mix(in srgb, var(--wri-focus) 15%, transparent);
  }

  /* Primary button styles - WRI Yellow background */
  :where(button, .button, .btn, [role="button"]) {
    background: var(--wri-gold-bg);
    color: var(--sl-color-text); /* White text for maximum contrast */
    border: 1px solid var(--wri-gold-bg);
    border-radius: 6px;
    padding: 0.5rem 1rem;
    font-weight: var(--wri-font-weight-medium);
    font-family: inherit;
    cursor: pointer;
    transition: background-color 0.2s ease, border-color 0.2s ease;
    text-decoration: none;
  }
  
  :where(button, .button, .btn, [role="button"]):hover,
  :where(button, .button, .btn, [role="button"]):focus {
    background: var(--wri-gold-accessible);
    border-color: var(--wri-gold-accessible);
  }

  /* Secondary button styles - outlined version */
  :where(.button-secondary, .btn-secondary, button[data-variant="secondary"]) {
    background: transparent;
    color: var(--wri-gold-bg);
    border: 1px solid var(--wri-gold-bg);
  }
  
  :where(.button-secondary, .btn-secondary, button[data-variant="secondary"]):hover,
  :where(.button-secondary, .btn-secondary, button[data-variant="secondary"]):focus {
    background: var(--wri-gold-bg);
    color: #FFFFFF;
  }

  /* Dark mode button adjustments */
  :root[data-theme="dark"] :where(button, .button, .btn, [role="button"]) {
    background: var(--sl-color-bg);
    color: var(--sl-color-text); /* Dark text on bright yellow */
    border-color: var(--wri-yellow-900);
  }
  
  :root[data-theme="dark"] :where(button, .button, .btn, [role="button"]):hover,
  :root[data-theme="dark"] :where(button, .button, .btn, [role="button"]):focus {
    background: var(--wri-yellow-900);
    border-color: var(--wri-yellow);
    color: var(--sl-color-text);
  }

  /* Dark mode secondary buttons */
  :root[data-theme="dark"] :where(.button-secondary, .btn-secondary, button[data-variant="secondary"]) {
    background: transparent;
    color: var(--wri-gold-bg);
    border-color: var(--wri-gold-bg);
  }
  
  :root[data-theme="dark"] :where(.button-secondary, .btn-secondary, button[data-variant="secondary"]):hover,
  :root[data-theme="dark"] :where(.button-secondary, .btn-secondary, button[data-variant="secondary"]):focus {
    background: var(--wri-gold-bg);
    color: var(--wri-slate-900);
  }

  /* Code styling with proper visibility and contrast */
  code {
    background: var(--sl-color-bg-inline-code);
    color: var(--sl-color-text);
    border: 1px solid var(--sl-color-hairline);
    border-radius: 4px;
    padding: 0.125em 0.375em;
    font-size: 0.875em;
    font-weight: var(--wri-font-weight-medium); /* Make sure code is visible */
    font-family: ui-monospace, "SF Mono", Monaco, "Cascadia Code", "Segoe UI Mono", 
                 "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace", "Source Code Pro",
                 "Fira Mono", "Droid Sans Mono", "Courier New", monospace;
  }

  /* Ensure code is visible in dark mode */
  :root[data-theme="dark"] code {
    background: var(--sl-color-bg-inline-code);
    color: var(--sl-color-text);
    border-color: var(--sl-color-hairline);
  }

  pre code {
    display: block;
    background: var(--sl-color-gray-1);
    color: var(--sl-color-text);
    padding: 1rem;
    border-radius: 8px;
    border: 1px solid var(--sl-color-hairline);
    overflow-x: auto;
    font-size: 0.875em;
    line-height: 1.5;
  }

  :root[data-theme="dark"] pre code {
    background: var(--wri-slate-800);
    color: var(--wri-slate-100);
    border-color: var(--wri-slate-600);
  }

  /* Enhanced table styling with proper color hierarchy */
  :where(table) {
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
    border: 1px solid var(--sl-color-hairline);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  :where(th, td) {
    border-bottom: 1px solid var(--sl-color-hairline-light);
    padding: 0.875rem 1rem;
    text-align: left;
    vertical-align: top;
  }
  
  :where(thead th) {
    font-weight: var(--wri-font-weight-bold);
    color: var(--sl-color-text);
    background: var(--sl-color-gray-2);
    border-bottom: 2px solid var(--sl-color-hairline);
    position: sticky;
    top: 0;
    z-index: 1;
  }

  :where(tbody tr) {
    transition: background-color 0.15s ease;
  }

  :where(tbody tr):hover {
    background: color-mix(in srgb, var(--sl-color-accent-low) 20%, transparent);
  }

  :where(tbody tr):nth-child(even) {
    background: color-mix(in srgb, var(--sl-color-gray-1) 30%, transparent);
  }

  :where(tbody tr):nth-child(even):hover {
    background: color-mix(in srgb, var(--sl-color-accent-low) 25%, var(--sl-color-gray-1));
  }

  /* Dark mode table improvements */
  :root[data-theme="dark"] :where(thead th) {
    background: var(--sl-color-gray-1);
    color: var(--sl-color-text);
  }

  :root[data-theme="dark"] :where(tbody tr):nth-child(even) {
    background: color-mix(in srgb, var(--sl-color-gray-1) 40%, transparent);
  }

  :root[data-theme="dark"] :where(tbody tr):hover {
    background: color-mix(in srgb, var(--sl-color-accent-low) 15%, transparent);
  }

  :root[data-theme="dark"] :where(tbody tr):nth-child(even):hover {
    background: color-mix(in srgb, var(--sl-color-accent-low) 20%, var(--sl-color-gray-1));
  }

  /* Enhanced blockquotes with WRI styling */
  blockquote {
    border-left: 4px solid var(--sl-color-accent);
    padding: 1rem 1.5rem;
    margin: 1.5rem 0;
    background: color-mix(in srgb, var(--sl-color-accent-low) 30%, transparent);
    border-radius: 0 8px 8px 0;
    font-style: italic;
    position: relative;
  }

  blockquote::before {
    content: '"';
    font-size: 3rem;
    color: var(--sl-color-accent);
    position: absolute;
    left: 0.5rem;
    top: -0.5rem;
    line-height: 1;
    opacity: 0.3;
  }

  /* List improvements */
  :where(ul, ol) {
    line-height: 1.6;
  }
}

/* =========================================================================
   3) STARLIGHT-SPECIFIC POLISH
   -------------------------------------------------------------------------
   The selectors below target common Starlight structures. They’re defensive:
   they won’t explode if class names evolve, but you can tighten them if you
   lock to a specific Starlight version.
   ========================================================================= */
@layer wri-overrides {
  /* Header + site title link */
  .site-title a {
    color: var(--sl-color-text);
    font-weight: var(--wri-font-weight-bold);
    letter-spacing: 0.01em;
  }
  .site-title a:hover {
    color: var(--sl-color-accent);
  }

  /* Optional logo sizing: if using <img> or inline SVG in Logo.astro */
  .site-title img,
  .site-title svg {
    height: 28px;
    width: auto;
    vertical-align: middle;
  }

  /* If you only have a single dark-on-light SVG and need it visible in dark,
     this filter keeps the yellow bright and lifts the dark paths just a bit.
     Prefer true light/dark assets if you can (best for contrast). */
  :root[data-theme="dark"] .site-title img {
    filter: drop-shadow(0 0 0.35px rgba(255,255,255,.35));
  }

  /* Primary nav (top) */
  header :where(nav a) {
    color: var(--sl-color-text);
    font-weight: var(--wri-font-weight-medium);
  }
  header :where(nav a:hover) {
    color: var(--sl-color-accent);
  }

  /* Sidebar nav - Use gray text for normal links */
  .sidebar-content :where(a[aria-current="page"])  {
  color: var(--sl-color-text); /* Dark text for active link */
  text-decoration: none;
  background-color: var(--wri-yellow-500); /* Light background for active link */
  }
  /* Ensure active/current items use WRI gold accent and inverted text */
  .sidebar-content a[aria-current="page"],
  .sl-sidebar a[aria-current="page"],
  :where([aria-current="page"]),
  :where(a[aria-current="page"]) {
    font-weight: 600;
    color: var(--sl-color-text-invert);
    background-color: var(--sl-color-accent); /* gold */
  }

  .sidebar-content a{
    color: var(--sl-color-gray-3);
    text-decoration: underline var(--wri-link-light);
  }
  .sidebar-content a:hover{
  color: var(--wri-link-light);
  text-decoration: underline var(--wri-link-light);
  }
  :root[data-theme="dark"] .sidebar-content :where(a[aria-current="page"])  {
  color: var(--sl-color-black); /* Dark text for active link */
  text-decoration: none;
  background-color: var(--wri-yellow-600); /* Light background for active link */
  }
  :root[data-theme="dark"] .sidebar-content a{
    color: var(--sl-color-gray-3);
    text-decoration: underline var(--sl-color-gray-3);
  }
  :root[data-theme="dark"] .sidebar-content a:hover {
  color: var(--wri-yellow-800);
  text-decoration: underline var(--wri-yellow-800);
  }
  .sl-sidebar :where(a) {
    border-radius: 6px;
    padding: 0.25rem 0.5rem;
    font-weight: var(--wri-font-weight-light);
  color: var(--sl-color-gray-5); /* Gray text for sidebar links */
  }
  .sl-sidebar :where(li.is-active > a) {
  background: var(--wri-gold-bg);
  color: var(--wri-slate-900);
    font-weight: var(--wri-font-weight-bold);
  }
  .sl-sidebar :where(a:hover) {
    background: color-mix(in oklab, var(--sl-color-accent-low) 60%, transparent);
    font-weight: var(--wri-font-weight-medium);
  color: var(--sl-color-text); /* Full text color on hover */
  }

  /* TOC links - Right sidebar minimal changes */
  .sl-toc :where(a[aria-current="page"]) {
  font-weight: var(--wri-font-weight-bold); /* Bold for active TOC link */
  }
  .sl-toc :where(a:hover) {
  color: white; /* White text on hover */
  }

  /* Search input - Simple accessible styling */
  :where(input[type="search"], .DocSearch-Input) {
    border: 1px solid var(--sl-color-hairline);
    background: var(--sl-color-bg);
  color: var(--sl-color-text); /* Black text in light mode */
    border-radius: 6px;
    padding: 0.5rem 0.75rem;
  }
  
  :where(input[type="search"], .DocSearch-Input):focus-visible {
    outline: 2px solid var(--wri-gold-bg);
    outline-offset: 2px;
    border-color: var(--wri-gold-bg);
  }

  /* Dark mode search text - white text */
  :root[data-theme="dark"] :where(input[type="search"], .DocSearch-Input) {
  color: var(--sl-color-text); /* White text in dark mode */
    background: var(--sl-color-bg);
    border-color: var(--sl-color-hairline);
  }

  /* Callouts / Asides
     These selectors catch Starlight’s callout containers in Markdown.
     If your Starlight version exposes more specific classes, adjust below. */
  .callout, .admonition, .sl-callout {
    border: 1px solid var(--sl-color-hairline);
    border-radius: 10px;
    padding: 0.9rem 1rem;
    background: var(--sl-color-bg-soft);
  }
  /* Titles inside callouts */
  .callout > .callout-title,
  .admonition > .admonition-title,
  .sl-callout > .sl-callout-title {
    font-weight: 700;
    margin-bottom: 0.35rem;
  }

  /* Variants (info/success/warn/danger) – add semantic color rails */
  .callout.info,     .admonition.info,     .sl-callout.info     { 
    background: var(--wri-callout-info-bg);
    border-color: var(--wri-callout-info-border);
  }
  .callout.success,  .admonition.success,  .sl-callout.success  { 
    background: var(--wri-callout-success-bg);
    border-color: var(--wri-callout-success-bd);
  }
  .callout.warning,  .admonition.warning,  .sl-callout.warning  { 
    background: var(--wri-callout-warn-bg);
    border-color: var(--wri-callout-warn-bd);
  }
  .callout.danger,   .admonition.danger,   .sl-callout.danger   { 
    background: var(--wri-callout-danger-bg);
    border-color: var(--wri-callout-danger-bd);
  }

  /* Blockquotes – thin brand accent on left */
  blockquote {
    border-left: 3px solid var(--sl-color-accent);
    padding-left: 1rem;
    color: color-mix(in oklab, var(--sl-color-text) 80%, gray);
    background: color-mix(in oklab, var(--sl-color-accent-low) 25%, transparent);
    border-radius: 0 8px 8px 0;
  }

  /* Badges / labels */
  .sl-badge,
  .badge {
    background: var(--sl-color-accent-low);
    color: var(--sl-color-text);
    border: 1px solid color-mix(in oklab, var(--sl-color-accent-low) 50%, var(--sl-color-hairline));
    border-radius: 999px;
    padding: 0.15rem 0.5rem;
    font-weight: 600;
    font-size: 0.85em;
  }

  /* Footer */
  footer {
    border-top: 1px solid var(--sl-color-hairline);
  }

  /* Images: avoid edge-to-edge in dense text; keep subtle radius */
  :where(.prose img) {
    border-radius: 10px;
  }

  /* ===================================================================
     STARLIGHT COMPONENT OVERRIDES - WRI Theme Only (No New Interactions)
     ================================================================= */

  /* Comprehensive Starlight sidebar overrides - use stable selectors */
  .sl-sidebar a,
  .sidebar-nav a,
  [data-sidebar] a,
  nav[aria-labelledby] a,
  aside nav a,
  .starlight-aside nav a {
  color: var(--sl-color-gray-4); /* Gray text for all sidebar links */
    text-decoration: none;
  }

  .sl-sidebar a:hover,
  .sidebar-nav a:hover,
  [data-sidebar] a:hover,
  nav[aria-labelledby] a:hover,
  aside nav a:hover,
  .starlight-aside nav a:hover {
  color: var(--sl-color-text); /* Full text color on hover */
  }

  /* Active/Current Page Links - Gold highlight */
  .sl-sidebar a[aria-current="page"],
  .sidebar-nav a[aria-current="page"],
  [data-sidebar] a[aria-current="page"],
  nav[aria-labelledby] a[aria-current="page"],
  aside nav a[aria-current="page"],
  .starlight-aside nav a[aria-current="page"],
  .sl-sidebar a[aria-current]:not([aria-current="false"]),
  .sidebar-nav a[aria-current]:not([aria-current="false"]),
  [data-sidebar] a[aria-current]:not([aria-current="false"]),
  nav[aria-labelledby] a[aria-current]:not([aria-current="false"]),
  aside nav a[aria-current]:not([aria-current="false"]),
  .starlight-aside nav a[aria-current]:not([aria-current="false"]) {
  color: var(--wri-slate-900); /* Dark text for contrast */
  font-weight: var(--wri-font-weight-medium);
  border-radius: 6px;
  }

  .sl-sidebar a[aria-current="page"]:hover,
  .sidebar-nav a[aria-current="page"]:hover,
  [data-sidebar] a[aria-current="page"]:hover,
  nav[aria-labelledby] a[aria-current="page"]:hover,
  aside nav a[aria-current="page"]:hover,
  .starlight-aside nav a[aria-current="page"]:hover {
  color: var(--wri-slate-900);
  }

  /* Search Component - Simple theme, no jumping */
  .sl-search button,
  .search-dialog button {
    border: 1px solid var(--wri-gold-bg);
    background: transparent;
    color: var(--wri-gold-bg);
  }

  .sl-search button:hover,
  .search-dialog button:hover {
    background: var(--wri-gold-bg);
    color: white;
  }

  /* Ensure cmd+k is visible */
  .sl-search button kbd,
  .search-dialog kbd {
  background: var(--sl-color-bg-inline-code);
  color: var(--sl-color-text);
  border: 1px solid var(--sl-color-hairline);
  padding: 0.125em 0.25em;
  border-radius: 3px;
  font-size: 0.75em;
  }

  .pagination-links a {
  color: var(--sl-color-text);
    text-decoration: none;
  }
  .pagination-links a .link-title {
    color: var(--wri-yellow);
  }
  :root[data-theme="dark"] .pagination-links a .link-title {
    color: var(--wri-yellow-800);
  }

  /* Dark Mode Overrides for comprehensive sidebar */
  :root[data-theme="dark"] .sl-sidebar a,
  :root[data-theme="dark"] .sidebar-nav a,
  :root[data-theme="dark"] [data-sidebar] a,
  :root[data-theme="dark"] nav[aria-labelledby] a,
  :root[data-theme="dark"] aside nav a,
  :root[data-theme="dark"] .starlight-aside nav a {
  color: var(--sl-color-gray-4); /* Gray text for sidebar in dark mode */
  }

  :root[data-theme="dark"] .sl-sidebar a:hover,
  :root[data-theme="dark"] .sidebar-nav a:hover,
  :root[data-theme="dark"] [data-sidebar] a:hover,
  :root[data-theme="dark"] nav[aria-labelledby] a:hover,
  :root[data-theme="dark"] aside nav a:hover,
  :root[data-theme="dark"] .starlight-aside nav a:hover {
  color: var(--sl-color-text);
  }

  /* Dark mode active sidebar links */
  :root[data-theme="dark"] .sl-sidebar a[aria-current="page"],
  :root[data-theme="dark"] .sidebar-nav a[aria-current="page"],
  :root[data-theme="dark"] [data-sidebar] a[aria-current="page"],
  :root[data-theme="dark"] nav[aria-labelledby] a[aria-current="page"],
  :root[data-theme="dark"] aside nav a[aria-current="page"],
  :root[data-theme="dark"] .starlight-aside nav a[aria-current="page"] {
  color: var(--wri-slate-900); /* Dark text on yellow background */
  background-color: var(--wri-gold-bg); /* Full yellow background in dark mode */
  }

  :root[data-theme="dark"] .sl-sidebar a[aria-current="page"]:hover,
  :root[data-theme="dark"] .sidebar-nav a[aria-current="page"]:hover,
  :root[data-theme="dark"] [data-sidebar] a[aria-current="page"]:hover,
  :root[data-theme="dark"] nav[aria-labelledby] a[aria-current="page"]:hover,
  :root[data-theme="dark"] aside nav a[aria-current="page"]:hover,
  :root[data-theme="dark"] .starlight-aside nav a[aria-current="page"]:hover {
  background-color: var(--wri-gold-bg);
  color: var(--wri-slate-900);
  }

  /* Dark mode TOC (right sidebar) minimal changes */
  :root[data-theme="dark"] .sl-toc :where(a[aria-current="page"]) {
  font-weight: var(--wri-font-weight-bold); /* Bold for active TOC link */
  }
  :root[data-theme="dark"] .sl-toc :where(a:hover) {
  color: white; /* White text on hover */
  }

  /* Keep main navigation green - exclude sidebar selectors */
  .sl-nav a,
  header nav a {
  color: var(--wri-link-light);
    text-decoration: none;
  }

  .sl-nav a:hover,
  header nav a:hover {
  color: var(--wri-link-hover-light);
  }

  :root[data-theme="dark"] .sl-nav a,
  :root[data-theme="dark"] header nav a {
  color: var(--wri-link-dark);
  }

  :root[data-theme="dark"] .sl-nav a:hover,
  :root[data-theme="dark"] header nav a:hover {
  color: var(--wri-link-hover-dark);
  }

  /* Fallback for any remaining Starlight default colors */
  [class*="astro-"] {
  --sl-color-text-accent: var(--sl-color-accent);
  }

  :root[data-theme="dark"] [class*="astro-"] {
  --sl-color-text-accent: var(--sl-color-accent);
  }
}

/* =========================================================================
   4) OPTIONAL: LOGO ASSET (using your provided SVG)
   -------------------------------------------------------------------------
   The preferred way is to use a Logo.astro override and inline the SVG for
   full fidelity (two-color mark). If you want to serve via CSS as a bg:
   - Save the SVG as /src/assets/wri-logo.svg
   - Uncomment the rules below and add a container element with class .wri-logo
   - Note that bg images won’t expose <title> for SRs; inline SVG is better.
   ========================================================================= */

/*
@layer wri-overrides {
  .wri-logo {
    display: inline-block;
    width: 170px;
    height: 61px;
    background: center / contain no-repeat url("/src/assets/wri-logo.svg");
  }
  :root[data-theme="dark"] .wri-logo {
    filter: drop-shadow(0 0 0.5px rgba(255,255,255,.35));
  }
}
*/

/* End WRI theme */